---
layout:     post
title:      Linq
category: blog
description: Linq语法
---

## Case来自[Linq101](https://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

#### Restriction Operators
```csharp
[Description("This sample demonstrates an indexed where clause that returns digits whose name is shorter than their value.")]

string[] digits = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" };

var shortDigits = digits.Where((d, index) => d.Length < index);
```


#### Projection Operators
```csharp
[Description("This sample uses a compound from clause to make a query that returns all pairs " +
                         "of numbers from both arrays such that the number from numbersA is less than the number " +
                         "from numbersB.")]

var numbersA = testDS.Tables["NumbersA"].AsEnumerable();
var numbersB = testDS.Tables["NumbersB"].AsEnumerable();
var pairs =
    numbersA
    .SelectMany(a =>
        numbersB
        .Where(b => a.Field<int>("number") < b.Field<int>("number"))
        .Select(b => new
        {
            a = a.Field<int>("number"),
            b = b.Field<int>("number")
        })
    );
```


#### Partitioning Operators
```csharp
[Description("This sample uses TakeWhile to return elements starting from the " +
                         "beginning of the array until a number is read whose value is not less than 6.")]
int[] numbers = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 };

var firstNumbersLessThan6 = numbers.TakeWhile(n => n < 6);
```

```csharp
[Description("This sample uses SkipWhile to get the elements of the array " +
                        "starting from the first element less than its position.")]
int[] numbers = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 };

var laterNumbers = numbers.SkipWhile((n, index) => n >= index);
```

#### Ordering Operators
```csharp
public class CaseInsensitiveComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        return string.Compare(x, y, StringComparison.OrdinalIgnoreCase);
    }
}

[Description("This sample uses an OrderBy clause with a custom comparer to " +
             "do a case-insensitive sort of the words in an array.")]
public void Linq31()
{
    string[] words = { "aPPLE", "AbAcUs", "bRaNcH", "BlUeBeRrY", "ClOvEr", "cHeRry" };

    //                var sortedWords = words.OrderBy(a => a, new CaseInsensitiveComparer());
    var sortedWords = words.OrderBy(w => w, new CaseInsensitiveComparer());
}
```

```csharp
[Description("This sample uses a compound orderby to sort a list of products, " +
                         "first by category, and then by unit price, from highest to lowest.")]
public void Linq37()
{
    List<Product> products = GetProductList();

    var sortedProducts =
        products.OrderBy(p => p.Category)
        .ThenByDescending(p => p.UnitPrice);

    ObjectDumper.Write(sortedProducts);
}
```

